import{f as V,g as C,_ as m,o as i,c as o,e as t,n as c,j as u,F as v,i as k,t as r,m as A,h as l,r as p,a as _}from"./index-597b71bf.js";import{T as E}from"./Toast-86d1a8e7.js";import{s as b}from"./statusStore-8018e5b0.js";const h=b(),{VITE_API:T,VITE_PATH:w}={VITE_API:"https://vue3-course-api.hexschool.io/v2",VITE_PATH:"coffee11",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0},g=V("adminProducts",{state:()=>({products:[],pagination:{}}),actions:{getProducts(s=1){h.isLoading=!0,C.get(`${T}/api/${w}/admin/products?page=${s}`).then(a=>{const{products:n,pagination:d}=a.data;h.isLoading=!1,h.isProcessing=!1,this.products=n,this.pagination=d}).catch(a=>{var d;const n=((d=a.data)==null?void 0:d.message)||"資料錯誤，稍後在試";this.isLoading=!1,E.fire({title:`${n}`,icon:"error"})})}}}),I={data(){return{}},props:["pages"]},S={"aria-label":"Page navigation example"},B={class:"pagination"},D=t("span",{"aria-hidden":"true"},"«",-1),M=[D],N={key:0,class:"page-link"},x=["onClick"],F=t("span",{"aria-hidden":"true"},"»",-1),H=[F];function O(s,a,n,d,P,$){return i(),o("div",null,[t("nav",S,[t("ul",B,[t("li",{class:c(["page-item",{disabled:n.pages.current_page===1}])},[t("a",{class:"page-link",href:"#","aria-label":"Previous",onClick:a[0]||(a[0]=u(e=>s.$emit("changePage",n.pages.current_page-1),["prevent"]))},M)],2),(i(!0),o(v,null,k(n.pages.total_pages,e=>(i(),o("li",{key:e+"page",class:c(["page-item",{active:e===n.pages.current_page}])},[e===n.pages.current_page?(i(),o("span",N,r(e),1)):(i(),o("a",{key:1,class:"page-link",href:"#",onClick:u(f=>s.$emit("change-page",e),["prevent"])},r(e),9,x))],2))),128)),t("li",{class:c(["page-item",{disabled:n.pages.current_page===n.pages.total_pages}])},[t("a",{class:"page-link",href:"#","aria-label":"Next",onClick:a[1]||(a[1]=u(e=>s.$emit("change-page",n.pages.current_page+1),["prevent"]))},H)],2)])])])}const R=m(I,[["render",O]]),U={data(){return{}},methods:{...A(g,["getProducts"])},computed:{...l(g,["products","pagination"]),...l(b,["isLoading","isProcessing"])},mounted(){this.getProducts()}},j={class:"text-end mt-4"},z=["disabled"],q={class:"table-responsive"},G={class:"table mt-4"},J=t("thead",null,[t("tr",null,[t("th",{width:"120"},"分類"),t("th",null,"產品名稱"),t("th",{width:"120"},"原價"),t("th",{width:"120"},"售價"),t("th",{width:"100"},"是否啟用"),t("th",{width:"120"},"編輯")])],-1),K={class:"text-end"},Q={class:"text-end"},W={class:"btn-group"},X=["disabled"],Y=["disabled"];function Z(s,a,n,d,P,$){return i(),o("div",null,[t("div",j,[t("button",{class:"btn btn-primary",disabled:s.isProcessing}," 建立新的產品 ",8,z)]),t("div",q,[t("table",G,[J,t("tbody",null,[(i(!0),o(v,null,k(s.products,e=>(i(),o("tr",{key:e.id},[t("td",null,r(e.category),1),t("td",null,r(e.title),1),t("td",K,r(e.origin_price),1),t("td",Q,r(e.price),1),t("td",null,[t("span",{class:c({"text-success":e.is_enabled})},r(e.is_enabled?"啟用":"未啟用"),3)]),t("td",null,[t("div",W,[t("button",{type:"button",class:"btn btn-outline-primary btn-sm",disabled:s.isProcessing}," 編輯 ",8,X),t("button",{type:"button",class:"btn btn-outline-danger btn-sm",disabled:s.isProcessing}," 刪除 ",8,Y)])])]))),128))])])])])}const tt=m(U,[["render",Z]]),et={data(){return{}},components:{AdminPagination:R,AdminProducts:tt},methods:{...A(g,["getProducts"])},computed:{...l(g,["products","pagination"]),...l(b,["isLoading","isProcessing"])},mounted(){this.getProducts()}},st={class:"mt-5"},nt={class:"container py-5"};function at(s,a,n,d,P,$){const e=p("VueLoading"),f=p("AdminProducts"),y=p("AdminPagination");return i(),o("div",st,[_(e,{active:s.isLoading,"onUpdate:active":a[0]||(a[0]=L=>s.isLoading=L)},null,8,["active"]),t("div",nt,[_(f),_(y,{pages:s.pagination,onChangePage:s.getProducts},null,8,["pages","onChangePage"])])])}const rt=m(et,[["render",at]]);export{rt as default};
