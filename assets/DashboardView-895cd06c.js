import{R as f,_ as p,r as c,o as i,c as m,a as _,w as k,b as h,e as l,j as $,d as A,u as V,l as x}from"./index-597b71bf.js";import{T as d}from"./Toast-86d1a8e7.js";const v={data(){return{}},components:{RouterLink:f},methods:{logout(){document.cookie="hexToken=; expires=; path=/",this.$router.push("/")}}};function R(t,e,s,o,u,r){const n=c("RouterLink");return i(),m("div",null,[_(n,{to:"/"},{default:k(()=>[h("回到前台")]),_:1}),h(" | "),l("a",{href:"#",onClick:e[0]||(e[0]=$((...a)=>r.logout&&r.logout(...a),["prevent"]))},"登出")])}const T=p(v,[["render",R]]),{VITE_API:g}={VITE_API:"https://vue3-course-api.hexschool.io/v2",VITE_PATH:"coffee11",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0},w={data(){return{isAuth:!1}},components:{RouterView:A,AdminNavbar:T},methods:{checkAdmin(){const t=document.cookie.replace(/(?:(?:^|.*;\s*)hexToken\s*=\s*([^;]*).*$)|^.*$/,"$1");t?(this.$http.defaults.headers.common.Authorization=t,this.$http.post(`${g}/api/user/check`).then(()=>{this.isAuth=!0}).catch(e=>{var o;const s=((o=e.data)==null?void 0:o.message)||"沒有權限，請登入";this.isProcessing=!1,d.fire({title:`${s}`,icon:"error"})})):(d.fire({title:"請先登入",icon:"error"}),this.$router.push("/login"))}},mounted(){this.checkAdmin()}},E={class:"container py-3"},N=l("h2",{class:"mt-5"},"後台管理",-1);function b(t,e,s,o,u,r){const n=c("AdminNavbar"),a=c("RouterView");return i(),m("div",E,[_(n),N,u.isAuth?(i(),V(a,{key:0})):x("",!0)])}const P=p(w,[["render",b]]);export{P as default};
