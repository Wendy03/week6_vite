import{R as f,_ as p,r as a,o as i,c as m,b as _,w as k,d as h,e as l,k as $,f as A,u as V,p as v}from"./index-e4abd600.js";import{T as d}from"./Toast-70b26cd7.js";const x={data(){return{}},components:{RouterLink:f},methods:{logout(){document.cookie="hexToken=; expires=; path=/",this.$router.push("/")}}};function R(t,e,s,o,u,r){const n=a("RouterLink");return i(),m("div",null,[_(n,{to:"/"},{default:k(()=>[h("回到前台")]),_:1}),h(" | "),l("a",{href:"#",onClick:e[0]||(e[0]=$((...c)=>r.logout&&r.logout(...c),["prevent"]))},"登出")])}const T=p(x,[["render",R]]),{VITE_API:w}={VITE_API:"https://vue3-course-api.hexschool.io/v2",VITE_PATH:"coffee11",BASE_URL:"/week6_vite/",MODE:"production",DEV:!1,PROD:!0},g={data(){return{isAuth:!1}},components:{RouterView:A,AdminNavbar:T},methods:{checkAdmin(){const t=document.cookie.replace(/(?:(?:^|.*;\s*)hexToken\s*=\s*([^;]*).*$)|^.*$/,"$1");t?(this.$http.defaults.headers.common.Authorization=t,this.$http.post(`${w}/api/user/check`).then(()=>{this.isAuth=!0}).catch(e=>{var o;const s=((o=e.data)==null?void 0:o.message)||"沒有權限，請登入";this.isProcessing=!1,d.fire({title:`${s}`,icon:"error"})})):(d.fire({title:"請先登入",icon:"error"}),this.$router.push("/login"))}},mounted(){this.checkAdmin()}},E={class:"container py-3"},N=l("h2",{class:"mt-5"},"後台管理",-1);function b(t,e,s,o,u,r){const n=a("AdminNavbar"),c=a("RouterView");return i(),m("div",E,[_(n),N,u.isAuth?(i(),V(c,{key:0})):v("",!0)])}const P=p(g,[["render",b]]);export{P as default};
