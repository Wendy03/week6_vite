import{g as V,h as T,m as _,a as l,_ as p,o as r,c as a,e,F as P,j as k,n as I,k as w,t as d,R as E,r as u,l as S,b as g,w as A,p as b,d as v}from"./index-e4abd600.js";import{T as R}from"./Toast-70b26cd7.js";import{s as h}from"./statusStore-8f982174.js";import{c as x}from"./cartStore-b1199c31.js";const m=h(),{VITE_API:B,VITE_PATH:D}={VITE_API:"https://vue3-course-api.hexschool.io/v2",VITE_PATH:"coffee11",BASE_URL:"/week6_vite/",MODE:"production",DEV:!1,PROD:!0},c=V("products",{state:()=>({products:[],categories:["全部商品","淺焙咖啡","中焙咖啡","深焙咖啡","周邊商品"],filterCategory:"全部商品"}),actions:{getProducts(){m.isLoading=!0,T.get(`${B}/api/${D}/products/all`).then(t=>{m.isLoading=!1;const{products:o}=t.data;this.products=o}).catch(t=>{var i;m.isLoading=!1;const o=((i=t.data)==null?void 0:i.message)||"資料取得失敗，稍後在試";R.fire({title:`${o}`,icon:"error"})})},changeCategory(t){this.filterCategory=t}},getters:{filterProducts:t=>t.products.filter(i=>t.filterCategory==="全部商品"?t.products:i.category===t.filterCategory)}}),N={data(){return{}},methods:{..._(c,["changeCategory"])},computed:{...l(c,["categories","filterCategory"])}},z={class:"col-md-2 mb-2 my-5"},M={class:"list-group sticky-top"},U=["onClick"];function F(t,o,i,f,y,$){return r(),a("div",z,[e("ul",M,[(r(!0),a(P,null,k(t.categories,n=>(r(),a("li",{class:I(["list-group-item",{active:n===t.filterCategory}]),key:n,onClick:w(s=>t.changeCategory(n),["prevent"])},d(n),11,U))),128))])])}const H=p(N,[["render",F]]),O={data(){return{}},components:{RouterLink:E},methods:{..._(c,["getProducts"]),..._(x,["addToCart"])},computed:{...l(c,["products","filterProducts"]),...l(h,["isLoading","loadingItem","isProcessing"])},mounted(){this.getProducts()}},j={class:"col-md-10 my-5"},q={class:"row"},G={class:"card border-0 shadow-sm h-100"},J={class:"card-body"},K={class:"badge badge-secondary float-right ml-2"},Q={class:"card-title"},W={href:"#",class:"text-dark"},X={class:"card-text"},Y={class:"text-right pr-2"},Z={class:"card-footer d-flex"},tt={key:0,class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},et=["onClick"],st={key:0,class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"};function ot(t,o,i,f,y,$){const n=u("RouterLink");return r(),a("div",j,[e("div",q,[(r(!0),a(P,null,k(t.filterProducts,s=>(r(),a("div",{class:"col-md-4 col-sm-6 mb-3 mb-4",key:s.id},[e("div",G,[e("div",{style:S([{height:"170px","background-size":"cover","background-position":"center"},{backgroundImage:`url(${s.imageUrl})`}])},null,4),e("div",J,[e("span",K,d(s.category),1),e("h5",Q,[e("a",W,d(s.title),1)]),e("p",X,d(s.content),1),e("div",Y,d(s.price)+" 元",1)]),e("div",Z,[g(n,{to:`/product/${s.id}`,class:"btn btn-outline-secondary btn-sm"},{default:A(()=>[t.isProcessing?(r(),a("span",tt)):b("",!0),v(" 查看更多 ")]),_:2},1032,["to"]),e("button",{type:"button",class:"btn btn-outline-danger btn-sm ms-auto",onClick:C=>t.addToCart(s.id)},[s.id===t.loadingItem?(r(),a("span",st)):b("",!0),v(" 加到購物車 ")],8,et)])])]))),128))])])}const rt=p(O,[["render",ot]]),at={data(){return{}},components:{ProductCategory:H,ProductList:rt},methods:{..._(c,["getProducts","changeCategory"])},computed:{...l(c,["products","categories","filterProducts","filterCategory"]),...l(h,["isLoading","loadingItem"])},mounted(){this.getProducts()}},nt={class:"mt-5"},it={class:"row"};function ct(t,o,i,f,y,$){const n=u("VueLoading"),s=u("ProductCategory"),C=u("ProductList");return r(),a("div",nt,[g(n,{active:t.isLoading,"onUpdate:active":o[0]||(o[0]=L=>t.isLoading=L)},null,8,["active"]),e("div",it,[g(s),g(C)])])}const _t=p(at,[["render",ct]]);export{_t as default};
