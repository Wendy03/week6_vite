import{f as k,g as V,m,h as l,_ as p,o as a,c as n,e as s,F as v,i as C,n as I,j as T,t as d,R as w,r as u,k as E,a as _,w as x,l as S,b as P}from"./index-06287cfa.js";import{T as A}from"./Toast-d011430b.js";import{s as h}from"./statusStore-69524ef7.js";const g=h(),{VITE_API:R,VITE_PATH:B}={VITE_API:"https://vue3-course-api.hexschool.io/v2",VITE_PATH:"coffee11",BASE_URL:"/week6_vite/",MODE:"production",DEV:!1,PROD:!0},i=k("products",{state:()=>({products:[],categories:["全部商品","淺焙咖啡","中焙咖啡","深焙咖啡","周邊商品"],filterCategory:"全部商品"}),actions:{getProducts(){g.isLoading=!0,V.get(`${R}/api/${B}/products/all`).then(t=>{g.isLoading=!1;const{products:o}=t.data;this.products=o}).catch(t=>{var c;g.isLoading=!1;const o=((c=t.data)==null?void 0:c.message)||"資料取得失敗，稍後在試";A.fire({title:`${o}`,icon:"error"})})},changeCategory(t){this.filterCategory=t}},getters:{filterProducts:t=>t.products.filter(c=>t.filterCategory==="全部商品"?t.products:c.category===t.filterCategory)}}),D={data(){return{}},methods:{...m(i,["changeCategory"])},computed:{...l(i,["categories","filterCategory"])}},N={class:"col-md-2 mb-2 my-5"},z={class:"list-group sticky-top"},M=["onClick"];function U(t,o,c,f,y,$){return a(),n("div",N,[s("ul",z,[(a(!0),n(v,null,C(t.categories,r=>(a(),n("li",{class:I(["list-group-item",{active:r===t.filterCategory}]),key:r,onClick:T(e=>t.changeCategory(r),["prevent"])},d(r),11,M))),128))])])}const F=p(D,[["render",U]]),H={data(){return{}},components:{RouterLink:w},methods:{...m(i,["getProducts"])},computed:{...l(i,["products","filterProducts"]),...l(h,["isLoading","loadingItem"])},mounted(){this.getProducts()}},O={class:"col-md-10 my-5"},j={class:"row"},q={class:"card border-0 shadow-sm h-100"},G={class:"card-body"},J={class:"badge badge-secondary float-right ml-2"},K={class:"card-title"},Q={href:"#",class:"text-dark"},W={class:"card-text"},X={class:"text-right pr-2"},Y={class:"card-footer d-flex"},Z={key:0,class:"spinner-border m-5",role:"status"},tt=s("span",{class:"visually-hidden"},"Loading...",-1),st=[tt],et=s("button",{type:"button",class:"btn btn-outline-danger btn-sm ms-auto"},[s("i",{class:"fas fa-spinner fa-spin"}),P(" 加到購物車 ")],-1);function ot(t,o,c,f,y,$){const r=u("RouterLink");return a(),n("div",O,[s("div",j,[(a(!0),n(v,null,C(t.filterProducts,e=>(a(),n("div",{class:"col-md-4 col-sm-6 mb-3 mb-4",key:e.id},[s("div",q,[s("div",{style:E([{height:"170px","background-size":"cover","background-position":"center"},{backgroundImage:`url(${e.imageUrl})`}])},null,4),s("div",G,[s("span",J,d(e.category),1),s("h5",K,[s("a",Q,d(e.title),1)]),s("p",W,d(e.content),1),s("div",X,d(e.price)+" 元",1)]),s("div",Y,[_(r,{to:`/product/${e.id}`,class:"btn btn-outline-secondary btn-sm"},{default:x(()=>[t.loadingItem===e.id?(a(),n("div",Z,st)):S("",!0),P(" 查看更多 ")]),_:2},1032,["to"]),et])])]))),128))])])}const rt=p(H,[["render",ot]]),at={data(){return{}},components:{ProductCategory:F,ProductList:rt},methods:{...m(i,["getProducts","changeCategory"])},computed:{...l(i,["products","categories","filterProducts","filterCategory"]),...l(h,["isLoading","loadingItem"])},mounted(){this.getProducts()}},nt={class:"mt-5"},ct={class:"row"};function it(t,o,c,f,y,$){const r=u("VueLoading"),e=u("ProductCategory"),b=u("ProductList");return a(),n("div",nt,[_(r,{active:t.isLoading,"onUpdate:active":o[0]||(o[0]=L=>t.isLoading=L)},null,8,["active"]),s("div",ct,[_(e),_(b)])])}const _t=p(at,[["render",it]]);export{_t as default};
